-- Recursive Fibonacci (n-th term)
fib n =
  if n < 2
  then n
  else fib (n - 1) + fib (n - 2)

print_final n =
  super single input (n) output (out)
#BEGINSUPER
    out = unsafePerformIO
      (do
        print "Fib:"
        let v = head n
        print v
        pure [0])
#ENDSUPER

wrap x = x : []

main = print_final (wrap (fib 10))
